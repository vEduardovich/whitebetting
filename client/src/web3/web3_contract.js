const promisify = (inner) =>
  new Promise((resolve, reject) =>
    inner((err, res) => {
      if (err) { reject(err) }
      resolve(res);
    })
	);

// network 확인
export async function getContractInfo(){
	const info = new Object();
	if (typeof web3 == 'undefined'){
		// console.log(info);
		return ;
	}
	const netId = await promisify( cb => web3.version.getNetwork(cb)); //초대박! ★ promise로 해결 19.01.22
	const abi = [{ "constant": false, "inputs": [{ "internalType": "address", "name": "_newManager", "type": "address" }], "name": "changeManger", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "uint64", "name": "_fixtureId", "type": "uint64" }, { "internalType": "uint32", "name": "_odd_homeTeam", "type": "uint32" }, { "internalType": "uint32", "name": "_odd_drawTeam", "type": "uint32" }, { "internalType": "uint32", "name": "_odd_awayTeam", "type": "uint32" }, { "internalType": "uint32", "name": "_odd_over", "type": "uint32" }, { "internalType": "uint32", "name": "_odd_under", "type": "uint32" }, { "internalType": "uint32", "name": "_odd_homeTeamAndDraw", "type": "uint32" }, { "internalType": "uint32", "name": "_odd_homeAndAwayTeam", "type": "uint32" }, { "internalType": "uint32", "name": "_odd_awayTeamAndDraw", "type": "uint32" }], "name": "changeOdd", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address payable", "name": "_newOwner", "type": "address" }], "name": "changeOwner", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "uint256", "name": "_eth", "type": "uint256" }], "name": "deposit", "outputs": [], "payable": true, "stateMutability": "payable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "uint64", "name": "_fixtureId", "type": "uint64" }, { "internalType": "uint8", "name": "_homeDrawAway", "type": "uint8" }, { "internalType": "uint8", "name": "_overUnder", "type": "uint8" }], "name": "givePrizeMoney", "outputs": [], "payable": true, "stateMutability": "payable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "uint64", "name": "_fixtureId", "type": "uint64" }, { "internalType": "uint16", "name": "_selectedTeam", "type": "uint16" }, { "internalType": "uint256", "name": "_stake", "type": "uint256" }, { "internalType": "uint32", "name": "_odd", "type": "uint32" }], "name": "placeBet", "outputs": [], "payable": true, "stateMutability": "payable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "uint64", "name": "_fixtureId", "type": "uint64" }, { "internalType": "uint256", "name": "_timestamp", "type": "uint256" }, { "internalType": "uint32", "name": "_odd_homeTeam", "type": "uint32" }, { "internalType": "uint32", "name": "_odd_drawTeam", "type": "uint32" }, { "internalType": "uint32", "name": "_odd_awayTeam", "type": "uint32" }, { "internalType": "uint32", "name": "_odd_over", "type": "uint32" }, { "internalType": "uint32", "name": "_odd_under", "type": "uint32" }, { "internalType": "uint32", "name": "_odd_homeTeamAndDraw", "type": "uint32" }, { "internalType": "uint32", "name": "_odd_homeAndAwayTeam", "type": "uint32" }, { "internalType": "uint32", "name": "_odd_awayTeamAndDraw", "type": "uint32" }, { "internalType": "uint8", "name": "_open_status", "type": "uint8" }], "name": "setGameInfo", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "uint64", "name": "_fixtureId", "type": "uint64" }, { "internalType": "uint8", "name": "_open_status", "type": "uint8" }], "name": "setOpenStatus", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "uint256", "name": "_amount", "type": "uint256" }], "name": "withdraw", "outputs": [], "payable": true, "stateMutability": "payable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "_manager", "type": "address" }], "payable": true, "stateMutability": "payable", "type": "constructor" }, { "payable": true, "stateMutability": "payable", "type": "fallback" }, { "anonymous": false, "inputs": [{ "indexed": false, "internalType": "uint256", "name": "odd", "type": "uint256" }], "name": "Success", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "internalType": "address", "name": "sender", "type": "address" }, { "indexed": false, "internalType": "uint256", "name": "eth", "type": "uint256" }], "name": "Deposit", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "internalType": "address", "name": "receiver", "type": "address" }, { "indexed": false, "internalType": "uint256", "name": "eth", "type": "uint256" }], "name": "Withdraw", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "internalType": "address", "name": "user", "type": "address" }, { "indexed": false, "internalType": "uint64", "name": "fixtureId", "type": "uint64" }, { "indexed": false, "internalType": "uint16", "name": "selectedTeam", "type": "uint16" }, { "indexed": false, "internalType": "uint256", "name": "stake", "type": "uint256" }, { "indexed": false, "internalType": "uint256", "name": "odd", "type": "uint256" }], "name": "NewStake", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "internalType": "uint64", "name": "_fixtureId", "type": "uint64" }, { "indexed": false, "internalType": "uint256", "name": "_timestamp", "type": "uint256" }, { "indexed": false, "internalType": "uint32", "name": "_odd_homeTeam", "type": "uint32" }, { "indexed": false, "internalType": "uint32", "name": "_odd_drawTeam", "type": "uint32" }, { "indexed": false, "internalType": "uint32", "name": "_odd_awayTeam", "type": "uint32" }, { "indexed": false, "internalType": "uint32", "name": "_odd_over", "type": "uint32" }, { "indexed": false, "internalType": "uint32", "name": "_odd_under", "type": "uint32" }, { "indexed": false, "internalType": "uint32", "name": "_odd_homeTeamAndDraw", "type": "uint32" }, { "indexed": false, "internalType": "uint32", "name": "_odd_homeAndAwayTeam", "type": "uint32" }, { "indexed": false, "internalType": "uint32", "name": "_odd_awayTeamAndDraw", "type": "uint32" }, { "indexed": false, "internalType": "uint8", "name": "_open_status", "type": "uint8" }], "name": "SetGame", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "internalType": "uint64", "name": "_fixtureId", "type": "uint64" }, { "indexed": false, "internalType": "uint32", "name": "_odd_homeTeam", "type": "uint32" }, { "indexed": false, "internalType": "uint32", "name": "_odd_drawTeam", "type": "uint32" }, { "indexed": false, "internalType": "uint32", "name": "_odd_awayTeam", "type": "uint32" }, { "indexed": false, "internalType": "uint32", "name": "_odd_over", "type": "uint32" }, { "indexed": false, "internalType": "uint32", "name": "_odd_under", "type": "uint32" }, { "indexed": false, "internalType": "uint32", "name": "_odd_homeTeamAndDraw", "type": "uint32" }, { "indexed": false, "internalType": "uint32", "name": "_odd_homeAndAwayTeam", "type": "uint32" }, { "indexed": false, "internalType": "uint32", "name": "_odd_awayTeamAndDraw", "type": "uint32" }], "name": "ChangeOdd", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "internalType": "uint64", "name": "_fixtureId", "type": "uint64" }, { "indexed": false, "internalType": "uint8", "name": "_homeDrawAway", "type": "uint8" }, { "indexed": false, "internalType": "uint8", "name": "_overUnder", "type": "uint8" }], "name": "GivePrizeMoney", "type": "event" }, { "constant": true, "inputs": [{ "internalType": "uint64", "name": "", "type": "uint64" }, { "internalType": "uint256", "name": "", "type": "uint256" }], "name": "betList", "outputs": [{ "internalType": "address payable", "name": "user", "type": "address" }, { "internalType": "uint256", "name": "stake", "type": "uint256" }, { "internalType": "uint32", "name": "odd", "type": "uint32" }, { "internalType": "uint16", "name": "selectedTeam", "type": "uint16" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "internalType": "uint64", "name": "", "type": "uint64" }], "name": "gameList", "outputs": [{ "internalType": "uint256", "name": "timestamp", "type": "uint256" }, { "internalType": "uint32", "name": "odd_homeTeam", "type": "uint32" }, { "internalType": "uint32", "name": "odd_drawTeam", "type": "uint32" }, { "internalType": "uint32", "name": "odd_awayTeam", "type": "uint32" }, { "internalType": "uint32", "name": "odd_over", "type": "uint32" }, { "internalType": "uint32", "name": "odd_under", "type": "uint32" }, { "internalType": "uint32", "name": "odd_homeTeamAndDraw", "type": "uint32" }, { "internalType": "uint32", "name": "odd_homeAndAwayTeam", "type": "uint32" }, { "internalType": "uint32", "name": "odd_awayTeamAndDraw", "type": "uint32" }, { "internalType": "uint8", "name": "open_status", "type": "uint8" }, { "internalType": "bool", "name": "isDone", "type": "bool" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "getBalance", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "getManager", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "manager", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "owner", "outputs": [{ "internalType": "address payable", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }];
	switch (netId) {
		case "1": //console.log('This is mainnet');// mainnet
			info.address = 'address'; 
			info.name = 'mainnet';
			info.abi = abi;
			return info;
			// break;
		case "3": //console.log('This is the ropsten test network.');// ropsten
			info.address = 'address'; 
			info.name = 'Ropsten';
			info.abi = abi;
			return info;
			// break;
		case "4": console.log('This is the Rinkeby test network.');
			info.address = '';
			info.name = 'Rinkeby';
			info.abi = abi;
			return info;
			// break;
		case "42": console.log('This is the Kovan test network.');
			info.address = 'address';
			info.name = 'Kovan';
			info.abi = abi;
			return info;
			// break;
		default	: console.log('This is an unknown network.');// local network
			info.address = 'address';
			// info.address = contract.networks[5777].address;
			info.name = 'unknown network';
			info.abi = abi;
			return info;
			// break;
		}	
}
